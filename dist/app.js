(()=>{"use strict";var t=function(){function t(t,e){this.templateId=t,this.rootNode=e,this.template=document.getElementById(t);var o=document.importNode(this.template.content,!0);this.html=o.firstElementChild,this.render()}return t.prototype.render=function(){this.rootNode.append(this.html)},t}();function e(t,e){var o=t[e];return{configurable:!0,get:function(){return o.bind(this)}}}var o,r,n=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=function(t){function o(e,o){var r=t.call(this,"project-item",o)||this;return r.data=e,r.rootNode=o,r.projectTitleNode=r.html.querySelector("#project-title"),r.projectSubtitleNode=r.html.querySelector("#project-subtitle"),r.projectDescriptionNode=r.html.querySelector("#project-description"),r.injectData(),r.configure(),r}return n(o,t),o.prototype.injectData=function(){this.projectTitleNode.textContent=this.data.title,this.projectSubtitleNode.textContent=this.data.persons,this.projectDescriptionNode.textContent=this.data.description},o.prototype.onDragStart=function(t){t.dataTransfer.setData("text/plain",this.data.id.toString())},o.prototype.configure=function(){this.html.addEventListener("dragstart",this.onDragStart)},function(t,e,o,r){var n,i=arguments.length,c=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(i<3?n(c):i>3?n(e,o,c):n(e,o))||c);i>3&&c&&Object.defineProperty(e,o,c)}([e],o.prototype,"onDragStart",null),o}(t),c=function(){function t(){this.elements=[],this.subscribers=[]}return t.prototype.subscribe=function(t){this.subscribers.push(t)},t.prototype.broadcast=function(){var t=this;this.subscribers.forEach((function(e){return e(t.elements.slice())}))},t.prototype.addItem=function(t){this.elements.push(t),this.broadcast()},t}(),s=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),p=function(t){function e(){return t.call(this)||this}return s(e,t),e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.toggleItemType=function(t){var e=this.elements.find((function(e){return e.id===t}));e&&(e.toggleType(),this.broadcast())},e}(c).getInstance(),l=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),u=function(t,e,o,r){var n,i=arguments.length,c=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(i<3?n(c):i>3?n(e,o,c):n(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};!function(t){t[t.Active=0]="Active",t[t.Finished=1]="Finished"}(r||(r={}));var a=function(t){function o(e,o,r){var n=t.call(this,e,o)||this;return n.templateId=e,n.rootNode=o,n.type=r,n.projects=[],n.projectsTitleNode=n.html.querySelector("#projects-title"),n.projectsListNode=n.html.querySelector("#projects-list"),n.configure(),n}return l(o,t),o.prototype.onStoreSubscription=function(t){var e=this;this.projects=t.filter((function(t){return t.type===e.type})),this.renderItems()},o.prototype.onDragOver=function(t){t.preventDefault(),this.html.classList.add("projects_before-drop")},o.prototype.onDragLeave=function(t){this.html.classList.remove("projects_before-drop")},o.prototype.onDrop=function(t){var e=+t.dataTransfer.getData("text/plain"),o=this.projects.find((function(t){return t.id===e}));(null==o?void 0:o.type)!==this.type&&p.toggleItemType(e),this.html.classList.remove("projects_before-drop")},o.prototype.renderItems=function(){var t=this;this.projectsListNode.innerHTML="",this.projects.forEach((function(e){return new i(e,t.projectsListNode)}))},o.prototype.configure=function(){var t,e=((t={})[r.Active]="Active projects",t[r.Finished]="Finished projects",t);this.projectsTitleNode.textContent=e[this.type],this.html.addEventListener("dragover",this.onDragOver),this.html.addEventListener("dragleave",this.onDragLeave),this.html.addEventListener("drop",this.onDrop),p.subscribe(this.onStoreSubscription)},u([e],o.prototype,"onStoreSubscription",null),u([e],o.prototype,"onDragOver",null),u([e],o.prototype,"onDragLeave",null),u([e],o.prototype,"onDrop",null),o}(t),f=function(){function t(t,e,o){this.title=t,this.people=e,this.description=o,this.id=Date.now(),this.type=r.Active}return Object.defineProperty(t.prototype,"persons",{get:function(){return 1===this.people?this.people+" person assigned":this.people+" persons assigned"},enumerable:!1,configurable:!0}),t.prototype.toggleType=function(){this.type=this.type===r.Active?r.Finished:r.Active},t}();function h(t){return t.required?0!==t.value.toString().trim().length:"string"==typeof t.value&&t.minLength?t.value.length>=t.minLength:"string"==typeof t.value&&t.maxLength?t.value.length<=t.maxLength:"number"==typeof t.value&&void 0!==t.min?t.value>=t.min:"number"!=typeof t.value||void 0===t.max||t.value<=t.max}var d=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),y=function(t){function o(e,o){var r=t.call(this,e,o)||this;return r.templateId=e,r.rootNode=o,r.titleField=r.html.querySelector("#title-field"),r.peopleField=r.html.querySelector("#people-field"),r.descriptionField=r.html.querySelector("#description-field"),r.configure(),r}return d(o,t),o.prototype.getFormValues=function(){var t=this.titleField.value,e=+this.peopleField.value,o=this.descriptionField.value;return h({value:t,minLength:3})&&h({value:e,min:1})&&h({value:o,minLength:10})?[t,e,o]:[]},o.prototype.resetForm=function(){this.html.reset()},o.prototype.submitHandler=function(t){t.preventDefault();var e=this.getFormValues();if(e.length){var o=new(f.bind.apply(f,function(t,e){for(var o=0,r=e.length,n=t.length;o<r;o++,n++)t[n]=e[o];return t}([void 0],e)));p.addItem(o),this.resetForm()}else alert("Form validation error occurred!")},o.prototype.configure=function(){this.html.addEventListener("submit",this.submitHandler)},function(t,e,o,r){var n,i=arguments.length,c=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(i<3?n(c):i>3?n(e,o,c):n(e,o))||c);i>3&&c&&Object.defineProperty(e,o,c)}([e],o.prototype,"submitHandler",null),o}(t),v=document.getElementById("app");new y("form-template",v),new a("projects-template",v,r.Active),new a("projects-template",v,r.Finished)})();